<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Lufthansa Locator Healing Lab - Full Validation</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #eef2f6;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #0a3d62;
        }
        section {
            background: #ffffff;
            padding: 20px;
            border-radius: 6px;
            border: 2px solid #d0d4d9;
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            margin-top: 25px;
        }
        input, select {
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #aaa;
            margin: 5px 0;
            width: 250px;
        }
        h2 { color: #003366; }

        .btn {
            padding: 10px 15px;
            background: #003399;
            color: white;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            margin-top: 10px;
        }

        #toast {
            visibility: hidden;
            min-width: 200px;
            background-color: #222;
            color: white;
            padding: 12px;
            position: fixed;
            top: 25px;
            right: 25px;
            border-radius: 6px;
            opacity: 0;
            z-index: 9999;
            transition: opacity .4s, visibility .4s;
        }
        #toast.show { visibility: visible; opacity: 1; }
    </style>
</head>

<body>

<h1>Locator Healing Validation Lab</h1>
<div id="toast"></div>

<script>
function showToast(msg){
    const t = document.getElementById("toast");
    t.textContent = msg;
    t.classList.add("show");
    setTimeout(() => t.classList.remove("show"), 2000);
}
</script>


<!-- 1️⃣ NORMAL DOM -->
<section>
    <h2>1. Normal DOM - Flight Search</h2>

    <input id="from-input" name="fromCity" data-lh="from" placeholder="From City">
    <input id="to-input" name="toCity" data-lh="to" placeholder="To City">

    <input id="dept-date" type="date" name="departDate" data-type="date">
    <input id="passenger-count" type="number" name="passCount" min="1" max="10" placeholder="Passengers">

    <select id="travel-class" name="class">
        <option value="">Select Class</option>
        <option>Economy</option>
        <option>Business</option>
        <option>First</option>
    </select>

    <button class="btn" id="validate1">Validate Section 1</button>

    <script>
        validate1.onclick = ()=>{
            if(!from-input.value.trim() || !to-input.value.trim() ||
               !dept-date.value || !passenger-count.value || !travel-class.value){
                showToast("❌ Section 1 Invalid");
            } else showToast("✅ Section 1 Valid");
        };
    </script>
</section>



<!-- 2️⃣ SHADOW DOM -->
<section>
    <h2>2. Shadow DOM - Cookie & Email</h2>

    <div id="shadowHost"></div>

    <button class="btn" id="validateShadow">Validate Section 2</button>

    <script>
        const host = document.getElementById("shadowHost");
        const root = host.attachShadow({ mode:"open" });

        root.innerHTML = `
            <input id="userEmail" type="email" placeholder="Enter Email" data-role="user">
            <label>
                <input id="consent" type="checkbox"> Accept Cookies
            </label>
        `;

        validateShadow.onclick = ()=>{
            let email = root.querySelector("#userEmail").value;
            let consent = root.querySelector("#consent").checked;
            if(!email || !consent){
                showToast("❌ Section 2 Invalid");
            } else showToast("✅ Section 2 Valid");
        };
    </script>
</section>



<!-- 3️⃣ IFRAME -->
<section>
    <h2>3. Iframe - Login & Membership</h2>

    <iframe id="frame" style="width:100%; height:260px;" srcdoc="
        <input id='u' data-type='username' placeholder='User Name'><br/><br/>
        <input id='mID' placeholder='Membership ID'><br/><br/>
        <input id='p' type='password' data-type='pass' placeholder='Password'><br/><br/>

        <button id='send'>Validate</button>

        <script>
            document.getElementById('send').onclick = () => {
                let u = document.getElementById('u').value.trim();
                let m = document.getElementById('mID').value.trim();
                let p = document.getElementById('p').value.trim();
                parent.postMessage('IFRAME:' + (!!u && !!m && !!p), '*');
            };
        </script>
    "></iframe>

    <script>
        window.addEventListener("message", e=>{
            if(e.data.startsWith("IFRAME:")){
                let ok = e.data.split(":")[1] === "true";
                showToast(ok ? "✅ Section 3 Valid" : "❌ Section 3 Invalid");
            }
        });
    </script>
</section>



<!-- 4️⃣ DYNAMIC DOM -->
<section>
    <h2>4. Dynamic DOM - Changing Attributes</h2>

    <input id="dynInput" data-random="123" placeholder="Enter dynamic field">
    <input id="dynCode" data-code="LH" placeholder="Enter Code">

    <button class="btn" id="validateDyn">Validate Section 4</button>

    <script>
        setInterval(()=>{
            dynInput.setAttribute("data-random", "R" + Math.floor(Math.random()*9999));
            dynCode.setAttribute("data-code", "LH" + Math.floor(Math.random()*99));
        }, 2000);

        validateDyn.onclick = ()=>{
            if(!dynInput.value.trim() || !dynCode.value.trim()){
                showToast("❌ Section 4 Invalid");
            } else showToast("✅ Section 4 Valid");
        };
    </script>
</section>



<!-- 5️⃣ PARENT/CHILD/SIBLING -->
<section>
    <h2>5. Parent → Child → Sibling Validation</h2>

    <div id="box">
        <label>Flight Details</label>
        <div>
            <input id="airlineCode" name="airline" placeholder="LH">
            <input id="flightNo" name="flight" placeholder="1234">
            <input id="flightDate" type="date">
        </div>
    </div>

    <button class="btn" id="validate5">Validate Section 5</button>

    <script>
        validate5.onclick = ()=>{
            if(!airlineCode.value.trim() || !flightNo.value.trim() || !flightDate.value){
                showToast("❌ Section 5 Invalid");
            } else showToast("✅ Section 5 Valid");
        };
    </script>
</section>



<!-- 6️⃣ DUPLICATE ELEMENTS -->
<section>
    <h2>6. Duplicate Elements - City Inputs</h2>

    <div id="cityGroup" style="display:flex;gap:15px;">
        <input class="city" name="city1" data-city-id="001" aria-label="city input" placeholder="City 1">
        <input class="city" name="city2" data-city-id="002" aria-label="city input" placeholder="City 2">
        <input class="city" name="city3" data-city-id="003" aria-label="city input" placeholder="City 3">
    </div>

    <button class="btn" id="validate6">Validate Section 6</button>

    <script>
        validate6.onclick = ()=>{
            let i = document.querySelectorAll("#cityGroup input");
            if([...i].some(x => x.value.trim() === "")){
                showToast("❌ Section 6 Invalid");
            } else showToast("✅ Section 6 Valid");
        };
    </script>
</section>


</body>
</html>
